---
interface Props {
    title?: string;
    description?: string;
    ogImage?: string;
    ogType?: string;
    canonicalUrl?: string;
    noindex?: boolean;
}

const SITE_NAME = "OLOPSC";
const DEFAULT_TITLE = `Official Website | ${SITE_NAME}`;
const DEFAULT_DESCRIPTION =
    "Our Lady of Perpetual Succor College (OLOPSC) — Providing quality education from Preschool to College in Marikina City. Discover our programs, admissions, and scholarships.";
const DEFAULT_OG_IMAGE = "/og-image.jpg";
const SITE_URL =
    Astro.site?.toString().replace(/\/$/, "") || "https://olopsc.edu.ph";

const {
    title,
    description = DEFAULT_DESCRIPTION,
    ogImage = DEFAULT_OG_IMAGE,
    ogType = "website",
    canonicalUrl,
    noindex = false,
} = Astro.props;

// Build the final title: append " | OLOPSC" to custom titles, or use the default
const fullTitle = title ? `${title} | ${SITE_NAME}` : DEFAULT_TITLE;

// Build the canonical URL from the current page path
const canonical =
    canonicalUrl || new URL(Astro.url.pathname, SITE_URL).toString();

// Build absolute OG image URL
const absoluteOgImage = ogImage.startsWith("http")
    ? ogImage
    : new URL(ogImage, SITE_URL).toString();
---

<!-- Primary Meta Tags -->
<title>{fullTitle}</title>
<meta name="description" content={description} />
{noindex && <meta name="robots" content="noindex, nofollow" />}
<link rel="canonical" href={canonical} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={ogType} />
<meta property="og:url" content={canonical} />
<meta property="og:title" content={fullTitle} />
<meta property="og:description" content={description} />
<meta property="og:image" content={absoluteOgImage} />
<meta property="og:site_name" content={SITE_NAME} />

<!-- Twitter Card (bonus — works on X / Twitter + many chat apps) -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content={fullTitle} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={absoluteOgImage} />
