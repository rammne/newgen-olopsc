---
import { ArrowRight } from "lucide-astro";

interface Props {
    number: number;
    sdg?: {
        title: string;
        slug: {
            current: string;
        };
        image: {
            asset: {
                url: string;
            };
            alt: string;
        };
        color: string;
        description?: string;
    };
}

const { number, sdg } = Astro.props;

const isActive = !!sdg;
---

<div
    class={`relative group rounded-xl overflow-hidden transition-all duration-300 ${
        isActive
            ? "hover:shadow-xl hover:-translate-y-1 cursor-pointer"
            : "opacity-40 grayscale cursor-not-allowed bg-gray-100"
    }`}
>
    {
        isActive ? (
            <a href={`/sdg/${sdg.slug.current}`} class="block h-full">
                <div
                    class="aspect-square relative overflow-hidden"
                    style={`background-color: ${sdg.color}`}
                >
                    {/* SDG Number */}
                    <div class="absolute top-4 left-4 text-white font-bold text-xl z-20 font-serif opacity-90">
                        {number}
                    </div>

                    {/* SDG Image */}
                    <img
                        src={sdg.image.asset.url}
                        alt={sdg.image.alt || sdg.title}
                        class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                    />

                    {/* Overlay on Hover */}
                    <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col items-center justify-center p-6 text-center z-10">
                        <h3 class="text-white font-bold text-lg mb-2 translate-y-4 group-hover:translate-y-0 transition-transform duration-300">
                            {sdg.title}
                        </h3>
                        <span class="text-white/80 text-sm flex items-center gap-1 translate-y-4 group-hover:translate-y-0 transition-transform duration-300 delay-75">
                            Read Our Commitment <ArrowRight size={14} />
                        </span>
                    </div>
                </div>
            </a>
        ) : (
            <div class="aspect-square relative flex items-center justify-center bg-gray-100 border-2 border-dashed border-gray-300">
                <div class="text-7xl font-bold text-gray-300 font-serif select-none">
                    {number}
                </div>
                <div class="absolute bottom-4 text-xs font-medium text-gray-400 uppercase tracking-widest">
                    Coming Soon
                </div>
            </div>
        )
    }
</div>
