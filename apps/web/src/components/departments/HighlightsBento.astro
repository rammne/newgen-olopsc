---
import { getSanityImageUrl } from "../../lib/utils/sanity";

interface Props {
  highlights: {
    title?: string;
    images?: Array<{
      asset?: {
        _id?: string;
        url?: string;
      };
      alt?: string;
    }>;
  };
}

const { highlights } = Astro.props;
---

{
  highlights && highlights.images && highlights.images.length === 6 && (
    <section class="min-h-[60vh] px-5 py-10 sm:px-[60px] sm:py-[100px] bg-white border-t border-[var(--color-neutral)]/30">
      <div class="container mx-auto max-w-full">
        {highlights.title && (
          <h2 class="text-section-header-mobile sm:text-section-header-desktop text-[var(--color-primary)] text-center mb-12">
            {highlights.title}
          </h2>
        )}
        <div class="highlights-bento-grid max-w-6xl mx-auto">
          {highlights.images.map((image, index) => (
            <div class={`highlight-item highlight-item-${index + 1}`}>
              {(image.asset?.url || true) && (
                <img
                  src={
                    image.asset?.url
                      ? getSanityImageUrl(image, {
                          width: 600,
                          height: 400,
                          fit: "crop",
                        })
                      : `https://placehold.co/600x400/e2e8f0/1e293b?text=Highlight+${index + 1}`
                  }
                  alt={image.alt || `Highlight ${index + 1}`}
                  class="w-full h-full object-cover rounded-lg"
                />
              )}
            </div>
          ))}
        </div>
      </div>
    </section>
  )
}

<style>
  .highlights-bento-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    grid-auto-rows: 200px;
  }

  /* Bento Grid Layout for 6 images */
  .highlight-item-1 {
    grid-column: 1 / -1;
    grid-row: span 2;
  }

  .highlight-item-2 {
    grid-column: 1;
    grid-row: span 1;
  }

  .highlight-item-3 {
    grid-column: 2;
    grid-row: span 1;
  }

  .highlight-item-4 {
    grid-column: 1 / -1;
    grid-row: span 2;
  }

  .highlight-item-5 {
    grid-column: 1;
    grid-row: span 1;
  }

  .highlight-item-6 {
    grid-column: 2;
    grid-row: span 1;
  }

  /* Desktop: 3-column grid */
  @media (min-width: 768px) {
    .highlights-bento-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      grid-auto-rows: 250px;
    }

    .highlight-item-1 {
      grid-column: 1 / 3;
      grid-row: span 2;
    }

    .highlight-item-2 {
      grid-column: 3;
      grid-row: span 2;
    }

    .highlight-item-3 {
      grid-column: 1;
      grid-row: span 1;
    }

    .highlight-item-4 {
      grid-column: 2 / 4;
      grid-row: span 1;
    }

    .highlight-item-5 {
      grid-column: 1;
      grid-row: span 1;
    }

    .highlight-item-6 {
      grid-column: 2 / 4;
      grid-row: span 1;
    }
  }

  .highlight-item {
    overflow: hidden;
    border-radius: 0.5rem;
    transition: transform 0.3s ease;
  }

  .highlight-item:hover {
    transform: scale(1.02);
  }

  .highlight-item img {
    transition: transform 0.5s ease;
  }

  .highlight-item:hover img {
    transform: scale(1.1);
  }
</style>
