---
alwaysApply: true
---

# Frontend Development Rules

## Technology Stack
- **AstroJS**: Use for static UI and page structure. Astro components should be the default choice for most UI elements.
- **ReactJS**: Only use React components when interactivity is required (state management, complex interactions, client-side logic).
- **TailwindCSS**: Primary styling framework. Use utility classes for all styling.
- **Lucide**: Use for all icons. Import icons from `lucide-react` or `lucide-astro` as appropriate.
- **ShadCN**: Use ShadCN components when needed for complex UI elements (forms, dialogs, dropdowns, etc.).
- **Framer Motion**: Use for animations and transitions. Import from `framer-motion` for React components.
- **Sanity CMS**: Content management system. All content structure must follow Sanity schema types defined in `apps/studio/schemaTypes/`.

## URL Routing & Page Structure (SEO Preservation)

### Required Static Pages
The following pages **MUST** be created as static `.astro` files in `apps/web/src/pages/` to preserve SEO from the original website:

**Main Pages:**
- `index.astro` → `/` (Homepage)
- `about.astro` → `/about`
- `admissions.astro` → `/admissions`
- `scholarship-programs.astro` → `/scholarship-programs`
- `contact.astro` → `/contact`
- `jobs-section.astro` → `/jobs-section`

**Academic Department Pages:**
- `preschool.astro` → `/preschool`
- `grade-school.astro` → `/grade-school`
- `junior-high-school.astro` → `/junior-high-school`
- `senior-high-school.astro` → `/senior-high-school`
- `college-department.astro` → `/college-department`

**College Program Pages:**
- `college-programs.astro` → `/college-programs` (main listing page)
- `computing-studies.astro` → `/computing-studies`
- `hospitality-management.astro` → `/hospitality-management`
- `tourism-management.astro` → `/tourism-management`
- `business-administration-and-entrepreneurship.astro` → `/business-administration-and-entrepreneurship`
- `education-and-liberal-arts.astro` → `/education-and-liberal-arts`
- `entrepreneurship.astro` → `/entrepreneurship`

### Routing Rules
1. **Static Pages**: All URLs listed above must be static pages (`.astro` files), NOT dynamic routes
2. **Dynamic Routes**: Only use dynamic routes (`[slug].astro`) for:
   - News articles: `/news/[slug]`
   - Events: `/event/[slug]`
   - Additional content types that are NOT in the required list above
3. **File Naming**: File names must match the URL path exactly (e.g., `grade-school.astro` for `/grade-school`)
4. **Case Sensitivity**: URLs are case-sensitive - use lowercase with hyphens
5. **No Redirects Needed**: Since we're using the exact same URLs, no redirects are needed for these pages

### Implementation Example
```astro
---
// apps/web/src/pages/preschool.astro
import Layout from '../layouts/Layout.astro'
import { getAcademicDepartmentBySlug } from '../lib/sanity/queries'

// Fetch data from Sanity using the department slug
const department = await getAcademicDepartmentBySlug('preschool')
const pageTitle = department?.seo?.title || 'Preschool'
---

<Layout title={pageTitle}>
  <!-- Page content -->
</Layout>
```

### Adding New Pages
When adding new pages that are NOT in the required list:
- Consider SEO impact
- Use descriptive, keyword-rich URLs
- Use hyphens for word separation
- Keep URLs short and readable
- Use lowercase URLs
- If the page might need dynamic content in the future, consider using a dynamic route pattern

## Sanity Schema Compliance

### Schema Structure Adherence
- **MUST** follow the exact structure and field names defined in Sanity schema types.
- Schema types are located in `apps/studio/schemaTypes/` directory.
- Reference schema files when building frontend components to ensure data structure alignment.

### Schema Types Overview
The Sanity schema includes:

**Objects (Reusable Components):**
- `hero` - Hero sections with multiple variants
- `cta` - Call-to-action buttons
- `feature` - Feature/highlight cards
- `testimonial` - Student/parent testimonials
- `stats` - Statistics/numbers display
- `section` - Flexible content sections
- `facultyMember` - Faculty/staff profiles
- `gallery` - Image galleries
- `portableText` - Rich text content
- `seo` - SEO metadata
- And more (see `apps/studio/SCHEMA_OVERVIEW.md`)

**Documents (Multiple Instances):**
- `academicDepartment` - Academic departments (Preschool, Grade School, JHS, SHS, College)
- `collegeProgram` - Individual college programs
- `news` - News articles
- `event` - Events

**Singletons (Single Instances):**
- `homePage`, `aboutPage`, `admissionsPage`, `scholarshipPage`, `contactPage`, `jobsPage`, `settings`

### Implementation Rules
1. **Field Names**: Use exact field names from Sanity schemas when querying and accessing data.
   - Example: If schema has `hero.title`, use `hero.title` in frontend, not `hero.heading` or `heroTitle`.

2. **Type Safety**: Ensure TypeScript types match Sanity schema types.
   - Generate or maintain type definitions that align with schema structures.
   - Use proper types for arrays, objects, references, and portable text.

3. **Component Mapping**: Create frontend components that directly map to Sanity schema objects.
   - `hero` schema → Hero component
   - `feature` schema → Feature card component
   - `testimonial` schema → Testimonial component
   - etc.

4. **Required Fields**: Respect required field validations from schemas.
   - Always check for required fields before rendering.
   - Handle optional fields gracefully with fallbacks.

5. **Portable Text**: Use proper portable text renderers for `portableText` fields.
   - Render rich text content with proper formatting, links, and embedded content.

6. **References**: Handle Sanity references correctly.
   - Resolve references when querying (use GROQ joins or separate queries).
   - Handle cases where referenced documents may not exist.

7. **Image Handling**: Use Sanity image URLs correctly.
   - Use Sanity's image CDN with proper transformations.
   - Include alt text from schema `alt` fields.
   - Use hotspot data when available for responsive images.

8. **Slug Usage**: Use slug fields for routing and URLs.
   - All document types with slugs should use them for page routes.
   - Format: `/department/[slug]`, `/news/[slug]`, etc.

### Query Best Practices
- Use GROQ queries that match the schema structure.
- Include all necessary fields in queries to avoid missing data.
- Use projections to fetch only needed data for performance.
- Handle null/undefined values from optional schema fields.

### Example: Academic Department Component
```astro
---
// Example: Following academicDepartment schema structure
import { getAcademicDepartment } from '@/lib/sanity/queries';

const { slug } = Astro.params;
const department = await getAcademicDepartment(slug);

// Use exact field names from schema:
// - department.title (not department.name)
// - department.hero (hero object)
// - department.keyFeatures (array of feature objects)
// - department.curriculum.title, department.curriculum.description
---

<section class="h-screen">
  <h1>{department.title}</h1>
  <!-- Render hero using department.hero schema structure -->
  <!-- Render features using department.keyFeatures array -->
</section>
```

## Pre-defined Styles (DO NOT REDEFINE)
The following are already defined in `global.css` and should be used directly:
- **Font Family**: 
  - Headings (h1, h2, h3): 'Playfair Display', serif
  - Body text (p, small): 'Inter', sans-serif
- **Font Sizes**: Use the CSS custom properties defined in global.css:
  - Hero headers: `text-hero-header-desktop` / `text-hero-header-mobile`
  - Section headers: `text-section-header-desktop` / `text-section-header-mobile`
  - Card titles: `text-card-title-desktop` / `text-card-title-mobile`
  - Main text: `text-main-desktop` / `text-main-mobile`
  - Small text: `text-small-desktop` / `text-small-mobile`
- **Button Components**: Use `.btn-primary` and `.btn-secondary` classes directly. Do not create custom button styles.

## Mobile-First Approach
- **ALWAYS** design and code for mobile first (375px width is the base mobile viewport).
- Use Tailwind's responsive breakpoints: `sm:`, `md:`, `lg:`, `xl:`, `2xl:`
- Mobile breakpoint: `375px` (base, no prefix)
- Above mobile: `> 375px` (use `sm:` prefix or higher)
- Test and verify mobile experience before adding desktop enhancements.

## Section Layout Rules

### Hero Section
- **MUST** always be `100vh` (full viewport height).
- Use `min-h-screen` or `h-screen` in Tailwind.
- Hero sections should be visually impactful and immediately communicate the school's value proposition.

### All Other Sections (Visual Tease Rule)
- **MUST** have `min-height: 60vh` (use `min-h-[60vh]` in Tailwind).
- This ensures content is always visible and encourages scrolling.

### Section Padding
Apply padding consistently across all sections (except Hero):

**Mobile (≤375px):**
- Horizontal padding: `px-5` (20px left/right)
- Vertical padding: `py-10` (40px top/bottom)

**Above Mobile (>375px):**
- Horizontal padding: `px-[60px]` or use custom spacing
- Vertical padding: `py-[100px]` or use custom spacing

**Example Pattern:**
```astro
<section class="min-h-[60vh] px-5 py-10 sm:px-[60px] sm:py-[100px]">
  <!-- Section content -->
</section>
```

## Design Principles

### Premium & Trustworthy Design
- Use clean, spacious layouts with generous white space.
- Maintain consistent visual hierarchy using the predefined typography scale.
- Ensure high contrast for readability (especially for parents and students).
- Use the brand colors from global.css:
  - Primary: `--color-primary` (#0a095f)
  - Accent: `--color-accent` (#ffa600)
  - Neutral: `--color-neutral` (#e4e4e4)

### Color Distribution (60-30-10 Rule)
- **MUST** follow the 60-30-10 color distribution rule for all designs:
  - **60% Neutral** (`--color-neutral` / #e4e4e4): Use for backgrounds, large areas, and base elements
  - **30% Primary** (`--color-primary` / #0a095f): Use for headings, key text, borders, and important UI elements
  - **10% Accent/CTA** (`--color-accent` / #ffa600): Use sparingly for call-to-action buttons, highlights, and emphasis
- This creates visual balance and guides user attention effectively.
- Apply this rule at the section level and page level for consistency.
- Neutral colors should dominate the visual space, primary color provides structure, and accent color draws attention to actions.

### School Website Context
- Prioritize clarity and ease of navigation.
- Make information easily accessible (academic programs, admissions, contact info).
- Use clear call-to-action buttons for important actions (apply, contact, learn more).
- Ensure the design feels professional and trustworthy to parents making important decisions.
- Use imagery and content that reflects the school's values and community.

### Modern UI/UX Standards
- Implement smooth, purposeful animations (use Framer Motion).
- Ensure touch targets are at least 44x44px on mobile.
- Use consistent spacing and alignment.
- Implement proper focus states for accessibility.
- Ensure color contrast meets WCAG AA standards minimum.
- Use progressive disclosure for complex information.

## Component Guidelines

### Astro Components
- Use for static content, layouts, and server-rendered UI.
- Keep Astro components simple and focused on presentation.
- Use Astro's `<slot />` for composition.

### React Components
- Use only when needed for:
  - Interactive forms
  - State management
  - Client-side interactions
  - Dynamic content updates
- Mark React components with `client:load` or appropriate hydration strategy.
- Keep React components lightweight and focused.

### Icons (Lucide)
- Always use Lucide icons for consistency.
- Import from `lucide-react` for React components or `lucide-astro` for Astro.
- Use appropriate icon sizes: `size={16}`, `size={20}`, `size={24}`, etc.
- Ensure icons have proper color contrast.

### ShadCN Components
- Use ShadCN for complex UI patterns:
  - Forms and form controls
  - Dialogs and modals
  - Dropdown menus
  - Data tables
  - Accordions
- Customize ShadCN components to match the school's brand colors and typography.
- Ensure ShadCN components are accessible and mobile-friendly.

### Animations (Framer Motion)
- Use animations to enhance user experience, not distract.
- Common patterns:
  - Fade in on scroll: `initial={{ opacity: 0 }}` → `animate={{ opacity: 1 }}`
  - Slide up: `initial={{ y: 20, opacity: 0 }}` → `animate={{ y: 0, opacity: 1 }}`
  - Stagger children animations for lists
- Keep animation durations between 200-500ms for most interactions.
- Use `whileInView` for scroll-triggered animations.
- Ensure animations respect `prefers-reduced-motion` media query.

## Code Examples

### Section Template
```astro
---
// Astro component example
---

<section class="min-h-[60vh] px-5 py-10 sm:px-[60px] sm:py-[100px]">
  <div class="container mx-auto">
    <h2>Section Title</h2>
    <p>Section content...</p>
  </div>
</section>
```

### Hero Section Template
```astro
---
// Hero section example
---

<section class="h-screen flex items-center justify-center">
  <div class="container mx-auto px-5 sm:px-[60px]">
    <h1>Hero Title</h1>
    <p>Hero subtitle or description</p>
    <button class="btn-primary">Call to Action</button>
  </div>
</section>
```

### React Component with Animation
```tsx
// React component example
import { motion } from 'framer-motion';
import { IconName } from 'lucide-react';

export function AnimatedCard() {
  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      whileInView={{ opacity: 1, y: 0 }}
      viewport={{ once: true }}
      transition={{ duration: 0.5 }}
      className="p-6 rounded-lg shadow-lg"
    >
      <IconName size={24} className="mb-4" />
      <h3>Card Title</h3>
      <p>Card content...</p>
    </motion.div>
  );
}
```

## Accessibility Requirements
- Use semantic HTML elements (`<header>`, `<nav>`, `<main>`, `<section>`, `<article>`, `<footer>`).
- Include proper ARIA labels where needed.
- Ensure keyboard navigation works for all interactive elements.
- Test with screen readers.
- Maintain focus indicators.
- Use alt text for all images.

## Performance Considerations
- Optimize images (use Astro's Image component).
- Lazy load images and components when appropriate.
- Minimize JavaScript bundle size (prefer Astro over React when possible).
- Use `client:visible` or `client:idle` for React components when full interactivity isn't immediately needed.

## Lighthouse Optimization (90+ Score Required)

**CRITICAL**: This is a public official website that must achieve 90+ scores in all Lighthouse categories (Performance, SEO, Accessibility, Best Practices). The site must be optimized for devices with poor internet connections.

### Performance Optimization (Target: 90+)

#### Core Web Vitals
- **First Contentful Paint (FCP)**: Target < 1.8s
  - Minimize render-blocking resources (CSS, JavaScript)
  - Use inline critical CSS for above-the-fold content
  - Defer non-critical CSS and JavaScript
  - Preload critical resources with `<link rel="preload">`
  - Use `font-display: swap` for web fonts to prevent invisible text

- **Largest Contentful Paint (LCP)**: Target < 2.5s
  - Optimize hero images: Use WebP/AVIF formats with proper sizing
  - Use `fetchpriority="high"` for LCP images
  - Preload LCP images: `<link rel="preload" as="image" href="..." fetchpriority="high">`
  - Minimize server response times (use Astro's static generation)
  - Remove render-blocking JavaScript and CSS
  - Use responsive images with `srcset` and proper `sizes` attributes
  - Ensure hero images are properly sized (not larger than needed)

- **Speed Index**: Target < 3.4s
  - Optimize above-the-fold content rendering
  - Minimize main-thread blocking
  - Use code splitting and lazy loading for below-the-fold content
  - Reduce layout shifts (CLS)

- **Cumulative Layout Shift (CLS)**: Target < 0.1
  - Always specify width and height attributes on images and videos
  - Reserve space for dynamic content (ads, embeds, iframes)
  - Avoid inserting content above existing content (use transforms/animations carefully)
  - Use `aspect-ratio` CSS property for responsive images
  - Prefer CSS transforms over properties that trigger layout

- **Time to Interactive (TTI)**: Target < 3.8s
  - Minimize JavaScript execution time
  - Reduce main-thread work
  - Use `client:visible` or `client:idle` for React components
  - Code split and lazy load non-critical JavaScript

#### Image Optimization
- **MUST** use Astro's `<Image />` component for all images
- Convert images to modern formats (WebP, AVIF) with fallbacks
- Use responsive images with `srcset` and `sizes`
- Set explicit `width` and `height` to prevent layout shift
- Use `loading="lazy"` for below-the-fold images
- Use `fetchpriority="high"` only for LCP images
- Optimize image dimensions (serve images at display size, not larger)
- Use Sanity image CDN with proper transformations:
  ```astro
  <Image
    src={sanityImageUrl}
    alt={altText}
    width={800}
    height={600}
    format="webp"
    quality={85}
    loading="lazy"
  />
  ```

#### JavaScript Optimization
- **MUST** prefer Astro components over React components (zero JavaScript by default)
- Use React only when interactivity is absolutely required
- For React components:
  - Use `client:visible` for components below the fold
  - Use `client:idle` for non-critical interactivity
  - Use `client:load` sparingly (only for critical above-the-fold interactivity)
  - Avoid `client:only` unless absolutely necessary
- Code split large dependencies
- Tree-shake unused code
- Minimize third-party scripts (analytics, chat widgets, etc.)
- Defer non-critical JavaScript
- Use dynamic imports for heavy libraries

#### CSS Optimization
- Extract critical CSS for above-the-fold content
- Inline critical CSS in `<head>`
- Defer non-critical CSS (load asynchronously)
- Remove unused CSS (use PurgeCSS/Tailwind's purge)
- Minimize CSS file size
- Avoid `@import` in CSS (increases render-blocking)

#### Font Optimization
- Use `font-display: swap` for all web fonts
- Preload critical fonts: `<link rel="preload" as="font" type="font/woff2" crossorigin>`
- Limit number of font weights/styles (2-3 max)
- Use system fonts when possible for body text
- Subset fonts to include only needed characters

#### Resource Hints
- Use `<link rel="preconnect">` for external domains (Sanity CDN, fonts)
- Use `<link rel="dns-prefetch">` for third-party resources
- Use `<link rel="preload">` for critical resources (LCP images, fonts)
- Use `<link rel="prefetch">` for likely next-page resources

#### Network Optimization (Poor Connection Support)
- Minimize HTTP requests (combine CSS/JS when possible)
- Enable compression (gzip/brotli) - ensure server supports
- Use HTTP/2 or HTTP/3 when available
- Implement service worker for caching (if needed)
- Cache static assets with proper cache headers
- Minimize payload size (compress, minify)
- Use CDN for static assets (Sanity CDN for images)

#### Astro-Specific Optimizations
- Use static site generation (SSG) for all pages when possible
- Leverage Astro's zero-JS islands architecture
- Use `Astro.glob()` efficiently (avoid loading unnecessary data)
- Optimize Sanity queries (fetch only needed fields)
- Use `getStaticPaths()` with proper `fallback` strategy
- Enable `output: 'static'` in `astro.config.mjs`

### SEO Optimization (Target: 90+)

#### Meta Tags
- **MUST** include proper `<title>` tags (50-60 characters, unique per page)
- **MUST** include `<meta name="description">` (150-160 characters, unique per page)
- Include Open Graph tags for social sharing:
  ```html
  <meta property="og:title" content="...">
  <meta property="og:description" content="...">
  <meta property="og:image" content="...">
  <meta property="og:type" content="website">
  ```
- Include Twitter Card tags
- Include canonical URLs: `<link rel="canonical" href="...">`
- Use proper `lang` attribute on `<html>` tag

#### Structured Data (Schema.org)
- **MUST** implement structured data for:
  - Organization (school information)
  - Breadcrumbs (for navigation)
  - Articles (for news/blog posts)
  - Events (for event pages)
  - Educational organizations
- Validate structured data with Google's Rich Results Test

#### Semantic HTML
- Use proper heading hierarchy (h1 → h2 → h3, no skipping)
- Use semantic HTML5 elements (`<header>`, `<nav>`, `<main>`, `<article>`, `<section>`, `<footer>`)
- Use `<nav>` for navigation menus
- Use `<main>` for main content (only one per page)
- Use proper list elements (`<ul>`, `<ol>`) for lists

#### URL Structure (SEO Preservation)
**CRITICAL**: The following URLs from the original website must be preserved for SEO purposes. All routing and page creation must follow this exact structure:

**Main Navigation & Information Pages:**
- `/` - Homepage
- `/about` - About page
- `/admissions` - Admissions page
- `/scholarship-programs` - Scholarship programs page
- `/contact` - Contact page
- `/jobs-section` - Careers/Jobs page

**Academic Department Pages:**
- `/preschool` - Preschool department (static page, not dynamic slug)
- `/grade-school` - Grade School department (static page, not dynamic slug)
- `/junior-high-school` - Junior High School department (static page, not dynamic slug)
- `/senior-high-school` - Senior High School department (static page, not dynamic slug)
- `/college-department` - College department main page (static page, not dynamic slug)

**College Program Pages:**
- `/college-programs` - Main college programs listing page
- `/computing-studies` - Computing Studies program (static page, not dynamic slug)
- `/hospitality-management` - Hospitality Management program (static page, not dynamic slug)
- `/tourism-management` - Tourism Management program (static page, not dynamic slug)
- `/business-administration-and-entrepreneurship` - Business Administration and Entrepreneurship program (static page, not dynamic slug)
- `/education-and-liberal-arts` - Education and Liberal Arts program (static page, not dynamic slug)
- `/entrepreneurship` - Entrepreneurship program (static page, not dynamic slug)

**URL Structure Rules:**
- **MUST** create static pages (`.astro` files) for all URLs listed above, not dynamic routes
- Use exact URL paths as specified (case-sensitive, hyphen-separated)
- For academic departments: Use static pages like `preschool.astro`, `grade-school.astro`, etc. in `apps/web/src/pages/`
- For college programs: Use static pages like `computing-studies.astro`, `hospitality-management.astro`, etc. in `apps/web/src/pages/`
- Dynamic routes (with `[slug]`) should only be used for:
  - News articles: `/news/[slug]`
  - Events: `/event/[slug]`
  - Additional academic departments or programs that are NOT in the list above
- Keep URLs short and readable
- Use lowercase URLs
- Use hyphens for word separation
- Implement proper 301 redirects for moved content
- When adding new pages, consider SEO impact and maintain consistency with existing URL patterns

#### Content Optimization
- Use descriptive alt text for all images (include keywords naturally)
- Write descriptive link text (avoid "click here", "read more")
- Include relevant keywords naturally in content
- Use proper heading tags for content hierarchy
- Ensure content is crawlable (not hidden behind JavaScript)

#### Technical SEO
- Create and submit XML sitemap
- Create and maintain `robots.txt`
- Ensure mobile-friendly design (responsive)
- Implement proper 404 error pages
- Use HTTPS (required for modern SEO)
- Ensure fast page load times (performance affects SEO)

### Accessibility Optimization (Target: 90+)

#### WCAG 2.1 Level AA Compliance
- **Color Contrast**: Minimum 4.5:1 for normal text, 3:1 for large text
  - Test all text/background combinations
  - Use tools to verify contrast ratios
  - Don't rely solely on color to convey information

#### Keyboard Navigation
- **MUST** ensure all interactive elements are keyboard accessible
- Tab order should be logical and intuitive
- Visible focus indicators on all focusable elements
- Skip links for main content navigation
- No keyboard traps

#### Screen Reader Support
- Use semantic HTML elements
- Include proper ARIA labels where needed:
  - `aria-label` for icon-only buttons
  - `aria-labelledby` for form fields
  - `aria-describedby` for additional descriptions
  - `aria-expanded` for collapsible content
  - `aria-current` for current page/step
- Use `alt` text for all images (descriptive, not redundant)
- Use `aria-hidden="true"` for decorative images
- Ensure form labels are properly associated

#### Focus Management
- Visible focus indicators (minimum 2px outline)
- Focus order follows visual order
- Focus management for modals/dialogs (trap focus, return focus on close)
- No focus indicators on mouse-only interactions (use `:focus-visible`)

#### Form Accessibility
- **MUST** associate labels with form inputs (`<label for="id">` or wrap input)
- Provide error messages with `aria-describedby`
- Use `aria-required="true"` for required fields
- Use `aria-invalid="true"` for invalid fields
- Provide clear, specific error messages

#### Media Accessibility
- Provide captions for videos
- Provide transcripts for audio content
- Ensure video/audio players are keyboard accessible
- Use `preload="none"` for videos to improve performance

#### Motion and Animation
- **MUST** respect `prefers-reduced-motion`:
  ```css
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
  ```
- Provide controls to pause/stop animations
- Avoid flashing content (can trigger seizures)

#### Language and Reading
- Use proper `lang` attribute on `<html>` and language changes
- Use clear, simple language
- Provide text alternatives for complex content
- Ensure text is readable (proper font size, line height)

### Best Practices (Target: 90+)

#### Security
- Use HTTPS (required)
- Avoid deprecated APIs
- Use secure cookies when applicable
- Implement Content Security Policy (CSP) headers
- Avoid `document.write()`
- Use `rel="noopener noreferrer"` for external links

#### Modern Web Standards
- Use modern HTML5 elements
- Avoid deprecated HTML attributes
- Use modern CSS (avoid vendor prefixes when not needed)
- Use modern JavaScript (ES6+, avoid polyfills when possible)
- Ensure proper DOCTYPE declaration

#### Console Errors
- **MUST** fix all console errors and warnings
- No JavaScript errors in production
- No network errors (404s, failed requests)
- Proper error handling for async operations

#### Image Best Practices
- All images must have `alt` attributes
- Use proper image formats (WebP, AVIF with fallbacks)
- Properly sized images (not larger than display size)
- Lazy load below-the-fold images

#### Mobile Optimization
- Viewport meta tag: `<meta name="viewport" content="width=device-width, initial-scale=1">`
- Touch targets at least 44x44px
- No horizontal scrolling
- Proper mobile navigation
- Fast tap response times

### Performance Testing Requirements

#### Before Deployment
- **MUST** test with Google Lighthouse (Desktop and Mobile)
- **MUST** achieve 90+ scores in all categories:
  - Performance: 90+
  - Accessibility: 90+
  - Best Practices: 90+
  - SEO: 90+
- Test on slow 3G connection (Chrome DevTools throttling)
- Test on actual mobile devices
- Test Core Web Vitals in PageSpeed Insights
- Verify no console errors
- Test keyboard navigation
- Test with screen reader (NVDA/JAWS/VoiceOver)

#### Testing Tools
- Google Lighthouse (Chrome DevTools)
- PageSpeed Insights
- WebPageTest
- Chrome DevTools Performance tab
- Chrome DevTools Accessibility panel
- WAVE (Web Accessibility Evaluation Tool)
- axe DevTools

#### Performance Budgets
- Total page weight: < 1MB (aim for < 500KB on mobile)
- JavaScript: < 200KB (uncompressed)
- CSS: < 50KB (uncompressed)
- Images: Optimize to smallest reasonable size
- Time to First Byte (TTFB): < 600ms
- First Contentful Paint (FCP): < 1.8s
- Largest Contentful Paint (LCP): < 2.5s
- Cumulative Layout Shift (CLS): < 0.1

### Code Implementation Examples

#### Optimized Image Component
```astro
---
import { Image } from 'astro:assets';
import { urlFor } from '@/lib/sanity/utils';
---

<Image
  src={urlFor(image).width(800).height(600).format('webp').quality(85).url()}
  alt={image.alt || 'Descriptive alt text'}
  width={800}
  height={600}
  loading="lazy"
  fetchpriority={isLCP ? "high" : "auto"}
  class="w-full h-auto"
/>
```

#### Preload Critical Resources
```astro
---
// In <head> section
---
<link rel="preconnect" href="https://cdn.sanity.io" crossorigin>
<link rel="dns-prefetch" href="https://fonts.googleapis.com">
<link rel="preload" as="image" href={lcpImageUrl} fetchpriority="high">
<link rel="preload" as="font" type="font/woff2" href="/fonts/inter.woff2" crossorigin>
```

#### Accessible Button
```astro
<button
  type="button"
  class="btn-primary"
  aria-label="Submit contact form"
  aria-describedby="submit-help"
>
  Submit
</button>
<span id="submit-help" class="sr-only">Submit your contact information</span>
```

#### Reduced Motion Support
```astro
---
// In component script
---
const prefersReducedMotion = typeof window !== 'undefined' 
  ? window.matchMedia('(prefers-reduced-motion: reduce)').matches 
  : false;
---
<motion.div
  initial={prefersReducedMotion ? {} : { opacity: 0, y: 20 }}
  animate={prefersReducedMotion ? {} : { opacity: 1, y: 0 }}
  transition={prefersReducedMotion ? {} : { duration: 0.5 }}
>
  Content
</motion.div>
```

## Testing Checklist

### Design & Layout
- [ ] Mobile view (375px) looks correct
- [ ] Desktop view (>375px) looks correct
- [ ] Hero section is exactly 100vh
- [ ] Other sections have min-height 60vh
- [ ] Padding matches specifications (20px/40px mobile, 60px/100px desktop)
- [ ] Typography uses predefined styles from global.css
- [ ] Buttons use `.btn-primary` or `.btn-secondary`
- [ ] Color distribution follows 60-30-10 rule (60% neutral, 30% primary, 10% accent)
- [ ] Colors match global.css definitions exactly
- [ ] Animations are smooth and purposeful
- [ ] Icons are from Lucide
- [ ] Design feels premium and trustworthy
- [ ] Content is clear and engaging for parents/students

### Sanity Schema Compliance
- [ ] Field names match Sanity schema exactly
- [ ] All required schema fields are handled
- [ ] Optional schema fields have proper fallbacks
- [ ] Portable text is rendered correctly
- [ ] Images use Sanity CDN with proper transformations
- [ ] References are resolved and handled properly

### Performance (Lighthouse 90+ Required)
- [ ] Google Lighthouse Performance score: 90+
- [ ] First Contentful Paint (FCP): < 1.8s
- [ ] Largest Contentful Paint (LCP): < 2.5s
- [ ] Speed Index: < 3.4s
- [ ] Cumulative Layout Shift (CLS): < 0.1
- [ ] Time to Interactive (TTI): < 3.8s
- [ ] All images optimized (WebP/AVIF, proper sizing, lazy loading)
- [ ] Critical CSS inlined
- [ ] Non-critical CSS deferred
- [ ] JavaScript minimized and code-split
- [ ] React components use appropriate hydration strategy (`client:visible`, `client:idle`)
- [ ] Fonts use `font-display: swap` and are preloaded
- [ ] Resource hints implemented (preconnect, dns-prefetch, preload)
- [ ] Page weight < 1MB (aim for < 500KB on mobile)
- [ ] Tested on slow 3G connection
- [ ] No render-blocking resources
- [ ] All images have explicit width/height to prevent CLS

### SEO (Lighthouse 90+ Required)
- [ ] Google Lighthouse SEO score: 90+
- [ ] Unique, descriptive `<title>` tags (50-60 characters)
- [ ] Unique `<meta name="description">` tags (150-160 characters)
- [ ] Open Graph tags implemented
- [ ] Twitter Card tags implemented
- [ ] Canonical URLs set correctly
- [ ] Proper `lang` attribute on `<html>`
- [ ] Structured data (Schema.org) implemented and validated
- [ ] Semantic HTML5 elements used correctly
- [ ] Proper heading hierarchy (h1 → h2 → h3)
- [ ] Descriptive alt text on all images
- [ ] Descriptive link text (no "click here")
- [ ] XML sitemap created and submitted
- [ ] `robots.txt` configured correctly
- [ ] Mobile-friendly (responsive design)
- [ ] HTTPS enabled

### Accessibility (Lighthouse 90+ Required)
- [ ] Google Lighthouse Accessibility score: 90+
- [ ] Color contrast meets WCAG AA (4.5:1 normal, 3:1 large text)
- [ ] All interactive elements keyboard accessible
- [ ] Visible focus indicators on all focusable elements
- [ ] Logical tab order
- [ ] Skip links implemented
- [ ] Proper ARIA labels where needed
- [ ] All images have descriptive alt text
- [ ] Form labels properly associated
- [ ] Error messages accessible (aria-describedby)
- [ ] `prefers-reduced-motion` respected
- [ ] Screen reader tested (NVDA/JAWS/VoiceOver)
- [ ] No keyboard traps
- [ ] Proper semantic HTML used
- [ ] Language attributes set correctly

### Best Practices (Lighthouse 90+ Required)
- [ ] Google Lighthouse Best Practices score: 90+
- [ ] HTTPS enabled
- [ ] No deprecated APIs used
- [ ] No console errors
- [ ] No network errors (404s, failed requests)
- [ ] Secure cookies (when applicable)
- [ ] Content Security Policy (CSP) headers
- [ ] No `document.write()`
- [ ] External links use `rel="noopener noreferrer"`
- [ ] Proper viewport meta tag
- [ ] Touch targets at least 44x44px
- [ ] No horizontal scrolling on mobile
- [ ] Modern web standards used

### Cross-Browser & Device Testing
- [ ] Tested on Chrome (desktop and mobile)
- [ ] Tested on Firefox
- [ ] Tested on Safari (desktop and mobile)
- [ ] Tested on Edge
- [ ] Tested on actual mobile devices (iOS and Android)
- [ ] Tested on tablets
- [ ] Tested with slow internet connection (3G throttling)